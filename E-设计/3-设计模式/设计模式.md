# 设计模式

## 什么是设计模式？

Christopher Alexander说过：“每一个模式描述了一个在我们周围不断**重复发生的问题**，以及该问题的**解决方案的核心**。这样，你就能一次又一次地使用该方案而不必做重复劳动”。

## 为什么要学习设计模式？

内行的设计者知道：不是解决任何问题都要从头做起。他们更愿意复用以前使用过的解决方案。当找到一个好的解决方案，他们会一遍又一遍地使用。这些经验是他们成为内行的部分原因。

如果你能记起以前问题的细节和怎么解决它的，你就可以复用以前的经验而不需要重新发现它。

## 学习难点

绝大部分设计模式的原理和实现，都非常简单，难的是掌握应用场景，搞清楚能解决什么问题。

## 学习重点

**==设计原则==**和**==思想==**其实比设计模式更加**==普适==**和**==重要==**，掌握了代码的设计原则和思想，我们甚至可以自己创造出来新的设计模式。

## 为什么很多模式都很相似？

实际上，每个设计模式都应该由两部分组成：

- 第一部分是**==应用场景==**，即这个模式可以解决哪类问题；
- 第二部分是**==解决方案==**，即这个模式的**==设计思路==**和具体的**==代码实现==**。不过，代码实现并不是模式必须包含的。

如果你单纯地只关注**==解决方案==**这一部分，甚至只关注**==代码实现==**，就会产生大部分模式看起来都很相似的错觉。

实际上，设计模式之间的主要区别还是在于**==设计意图==**，也就是**==应用场景==**。单纯地看设计思路或者代码实现，有些模式确实很相似，比如：策略模式和工厂模式。

策略模式包含策略的定义、创建和使用三部分，从代码结构上来，它非常像工厂模式。它们的区别在于，

- 策略模式侧重“策略”或“算法”这个特定的应用场景，用来解决根据运行时状态从一组策略中选择不同策略的问题，
- 而工厂模式侧重封装对象的创建过程，这里的对象没有任何业务场景的限定，可以是策略，但也可以是其他东西。

从设计意图上来，这两个模式完全是两回事儿。

## 主要干什么？

设计模式要干的事情就是：解耦，以应对代码的复杂性。

- 创建型模式：将**==创建和使用==**代码解耦，
- 结构型模式：将**==不同==**的**==功能==**代码解耦，
- 行为型模式：将==**不同**==的==**行为**==代码解耦。

## 分类

### 创建型模式

共5种。主要解决：对象的**==创建==**问题，封装复杂的创建过程，==解耦==对象的==创建和使用==。

包括：

- 单例模式：用来创建全局唯一的对象。
- 工厂模式（2种）：用来创建不同但是相关类型的对象（继承同一父类或者接口的一组子类），由给定的参数来决定创建哪种类型的对象。
- 建造者模式：用来创建复杂对象，可以通过设置不同的可选参数，“定制化”地创建不同的对象。
- 原型模式：针对创建成本比较大的对象，利用对已有对象进行复制的方式进行创建，以达到节省创建时间的目的。

### 结构型

共7种。主要解决：“类或对象的**==组合或组装==**”问题。

主要总结了：一些类或对象==组合在一起==的==经典结构==，这些经典的结构可以解决特定应用场景的问题。

包括：代理模式、桥接模式、装饰器模式、适配器模式、门面模式、组合模式、享元模式。

### 行为型

共11种。主要解决：“类或对象之间的**==交互==**”问题。

包括：观察者模式、模板模式、策略模式、职责链模式、状态模式、迭代器模式、访问者模式、备忘录模式、命令模式、解释器模式、中介模式。

