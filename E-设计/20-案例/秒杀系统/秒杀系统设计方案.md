# 秒杀系统设计方案

## 需要解决的问题：

秒杀系统的本质特征是：同一时刻有大量的读和写。

根据这个特征，我们来一个一个的解决。

- 同一时刻：我们可以通过答题等业务手段让请求不要把时间拉长。
- 大量读：少读一些，读少一些。分层过滤 + LocalCache。
  - 分层过滤：从客户端到最终的DB，中间每2层之间都有可能会出现瓶颈，一个一个解决。
    - 比如客户端到Nginx中间的上行网络带宽，可以通过预加载的方式。
    - Nginx层到应用层之间，为防止冲击应用层，可以用Nginx缓存。
    - 应用层到Redis之间，为防止冲击Redis，可以用LocalCache。
    - Redis到DB之间，为防止冲击DB，平衡速度差异，可以用MQ缓冲。
- 大量写：
  - 排队；
  - 限流；

## 解决思路

- 并发读：尽量减少用户到服务端来“读”数据，或者让他们读更少的数据；
- 并发写：在数据库层面独立出来一个库，做特殊的处理。
- 针对秒杀系统做一些保护，针对意料之外的情况设计兜底方案，以防止最坏的情况发生。

从==系统结构设计角度==来看，要想打造并维护一个==超大流量并发读写==、==高性能==、==高可用==的系统，在整个用户请求路径上从浏览器到服务端我们要遵循几个原则，就是要保证如下几点：

```wiki
用户请求的数据尽量少、
请求数尽量少、
路径尽量短、
依赖尽量少，
不要有单点。
```

秒杀的整体架构可以概括为“稳、准、快”几个关键字。

